---
layout: post
title: "SS week6"
date: 2017-03-24 14:16:54 +0800
comments: true
tags: Service_Security
---

# Public Key Cryptography

<!--more-->

ä¹‹å‰æ‰€è¨è«–çš„symmetric cryptographyæœ€çµ‚éƒ½æœ‰ä¸€å€‹ç„¡æ³•è§£æ±ºçš„å•é¡Œ:
å¦‚ä½•äº¤æ›key

å¤§æ¦‚åªèƒ½æ‰“æ‰®æˆ
<br>
<img src="{{root_url}}/images/fun/heisenberg.jpg" height= '200px' width="200px">

ç„¶å¾Œåˆ°å’–å•¡åº—
<br>
<img src="{{root_url}}/images/fun/behind_newspaper.jpg">

è·Ÿå°æ–¹é¢äº¤XDD

å› ç‚ºåŠ è§£å¯†éƒ½ç”¨åŒä¸€æŠŠkeyï¼Œæ‰€ä»¥keyæ²’æœ‰è¾¦æ³•é€éå…¬é–‹ç¶²è·¯äº¤æ›

---

## What is Public-Key (PK) Cryptography
å‰‡æ˜¯ä¸€å€‹æ˜¯ç§äººé‡‘é‘°ï¼Œå¦ä¸€å€‹å‰‡æ˜¯å…¬é–‹é‡‘é‘°

å…¬é–‹é‡‘é‘°å¯ä»¥å†å…¬é–‹ç¶²è·¯ä¸­å‚³è¼ª

ç§æœ‰é‡‘é‘°å‰‡è‡ªå·±ä¿ç®¡

ä¸»è¦æœ‰å…©ç¨®ç”¨é€”

- åŠ å¯†è³‡è¨Š

<img src="{{root_url}}/images/studynotes/secure.png">

- æ•¸ä½ç°½ç« (é©—è­‰ä¾†æºæ˜¯å¦æ­£ç¢º)

<img src="{{root_url}}/images/studynotes/signing.png">

å¦‚æœè¦åŒæ™‚åŠ å¯†è³‡è¨Šä¸¦é©—è­‰ä¾†æº

<img src="{{root_url}}/images/studynotes/confidentiality_non-repu.png">

**NOTE**: Does the order matter?

**Sure!!**

å¦‚æœå…ˆç”¨å°æ–¹public keyåŠ å¯†ï¼Œå†ç”¨è‡ªå·±private ç°½å

å°æ–¹æ”¶åˆ°å¾Œå…ˆé©—è­‰ä¾†æºå¾Œï¼Œåªèƒ½ä¿è­‰åŠ å¯†å¾Œçš„è³‡æ–™æ˜¯ä½ çš„

ä½†plain textä¾†æºç„¡æ³•é©—è­‰

---

## Graphic PK cryptography example

Ice cream vandor problem

<img src="{{root_url}}/images/studynotes/icecreamvendor.png" >

Q:

- What is the minimum number of vans we need?

- At which intersections would we base our vans?

This problem is hard to solve:

*O(n choose k) = O(n!/k!(n-k)!)*

However, this solution is easy to check:

*O(n)*

### Encrypt

<img src="{{root_url}}/images/studynotes/pkencry.png" >

### Decrypt

<img src="{{root_url}}/images/studynotes/pkdecry.png" >

---

## real-world PK crypt algorithm

1. knapsack problem

- it has been broken ğŸ˜°

<img src="{{root_url}}/images/studynotes/knapsackkeygen.png" >

<img src="{{root_url}}/images/studynotes/knapsackencry.png" >

<img src="{{root_url}}/images/studynotes/knapsackdecry.png" >


2. RSA algorithm

<img src="{{root_url}}/images/studynotes/rsakeygen.png" >

<img src="{{root_url}}/images/studynotes/rsaencry.png" >

<img src="{{root_url}}/images/studynotes/rsadecry.png" >

---

## Performance

é‚£æ—¢ç„¶æœ‰äº† PK , é‚£æˆ‘å€‘é‚„éœ€è¦symmetric cryptographyå¹¹éº»?

å¤§å®¶å¯ä»¥å®‰å…¨çš„äº¤æ›éš±å¯†è³‡è¨Šäº†ğŸ’ªğŸ’ªğŸ’ª

What a wonderful world ~~

.

.

.

ä½†äº‹å¯¦æ˜¯

éå°ç¨±çš„åŠ å¯†éå¸¸~æ…¢

<img src="{{root_url}}/images/studynotes/aesrsabench.png">

[benchmark](https://github.com/ISS-Security/demo_crypto/blob/master/sk_vs_pk_bench.rb)

æ–¼æ˜¯ç¾å¥½ä¸–ç•Œ

<img src="https://media.giphy.com/media/ZNKzkUzkRx75C/giphy.gif">

---

## In practice

ç•¶ç„¶ä¸æ˜¯é€™æ¨£ä¸–ç•Œå°±æ¯€äº†

ç¾å¯¦ä¸­å°‡å°ç¨±è·Ÿéå°ç¨±ä¸€èµ·ç”¨

ç”¨å°ç¨±åŠ å¯†è³‡è¨Šï¼Œå†ç”¨éå°ç¨±åŠ å¯†keyï¼Œé€™æ¨£è³‡è¨Šè·Ÿkeyéƒ½å¯ä»¥åœ¨ç¶²è·¯ä¸Šå‚³è¼¸å•¦~

åŒæ™‚åˆå…¼é¡§æ•ˆèƒ½

whole picture
<img src="{{root_url}}/images/studynotes/pkplussk.png">

---

## Coding Time~

- é¨™ä½ çš„ï¼Œåªè¦ç”¨libraryå°±å¥½

- rbnacléƒ½åšå®Œæ‰€æœ‰è©²åšçš„äº‹äº†

``` ruby rbnacl-pk-simple_box https://github.com/ISS-Security/demo_crypto/blob/master/rbnacl/rbnacl-pk-simple_box.rb

require 'rbnacl/libsodium'

# KEY CREATION
personA_private_key = RbNaCl::PrivateKey.generate
personA_public_key  = personA_private_key.public_key

personB_private_key = RbNaCl::PrivateKey.generate
personB_public_key  = personB_private_key.public_key

# KEY EXCHANGE
personA_box = RbNaCl::SimpleBox.from_keypair(
  personB_public_key,
  personA_private_key
)

personB_box = RbNaCl::SimpleBox.from_keypair(
  personA_public_key,
  personB_private_key
)

# SENDING
message = "secret"
ciphertext = personA_box.encrypt(message)

# RECEIVING
plaintext = personB_box.decrypt(ciphertext)
```

---

æœ€è¿‘æœƒå„˜å¿«æŠŠå‰å¹¾é€±çš„ä¸Šèª²ç­†è¨˜çµ¦è£œèµ·ä¾†ğŸ‘»ğŸ‘»ğŸ‘»